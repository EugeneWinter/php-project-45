#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';
require __DIR__ . '/../src/engine.php';
require __DIR__ . '/../src/cli.php';

$language = selectLanguage();
$name = welcomeUser($language);

while (true) {
    showMenu($language);
    $choice = trim(fgets(STDIN));
    
    $games = [
        '1' => [
            'file' => 'even',
            'title_en' => 'Even',
            'title_ru' => 'Чётность'
        ],
        '2' => [
            'file' => 'calc',
            'title_en' => 'Calculator',
            'title_ru' => 'Калькулятор'
        ],
        '3' => [
            'file' => 'gcd',
            'title_en' => 'GCD',
            'title_ru' => 'НОД'
        ],
        '4' => [
            'file' => 'progression',
            'title_en' => 'Progression',
            'title_ru' => 'Прогрессия'
        ],
        '5' => [
            'file' => 'prime',
            'title_en' => 'Prime',
            'title_ru' => 'Простое число'
        ]
    ];
    
    if ($choice === '0') {
        exitGame($language, $name);
    }
    
    if (isset($games[$choice])) {
        $gameFile = __DIR__ . '/../src/games/' . $games[$choice]['file'] . '.php';
        if (file_exists($gameFile)) {
            require $gameFile;
            runGame(getGameData(), getDescription($language), $language, $name);
        }
    } else {
        showMessage($language, 'invalid_choice');
    }
}